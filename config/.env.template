# Copy to repo root as `.env` (or set env vars in your runtime).

# Where to write output JSON / dedupe history
DATA_DIR=./data
# OUTPUT_JSON=./data/daily_digest.json
# DEDUPE_HISTORY_PATH=./data/dedupe_history.json

# Dedupe
DEDUPE_RECENT_DAYS=5
TITLE_DEDUPE_JACCARD=0.55
DEDUPKEY_NGRAM_N=2
DEDUPKEY_NGRAM_SIM=0.35

# Selection safety rails
MIN_TOP_ITEMS=5
LOW_QUALITY_POLICY=drop
LOW_QUALITY_DOWNGRADE_MAX_IMPORTANCE=1

# Source weighting
SOURCE_WEIGHT_ENABLED=1
SOURCE_WEIGHT_FACTOR=0.6

# Top selection filters
TOP_SOURCE_ALLOWLIST_ENABLED=1
TOP_SOURCE_ALLOWLIST_STRICT=1
# TOP_SOURCE_ALLOWLIST=Reuters,Bloomberg,Financial Times
TOP_FRESH_MAX_HOURS=72
# TOP_FRESH_EXCEPT_SIGNALS=policy,sanctions,earnings,stats
TOP_FRESH_EXCEPT_MAX_HOURS=168
TOP_REQUIRE_PUBLISHED=1

# Full text fetching
ARTICLE_FETCH_ENABLED=1
ARTICLE_FETCH_MAX_ITEMS=100
ARTICLE_FETCH_MIN_CHARS=1000
ARTICLE_FETCH_TIMEOUT_SEC=6
ARTICLE_FETCH_BROWSER_LOCALE=en-US
FULLTEXT_LOG_ENABLED=0
FULLTEXT_LOG_MAX_CHARS=400

# AI (Gemini)
GEMINI_API_KEY=
GEMINI_API_BASE=https://generativelanguage.googleapis.com/v1beta
GEMINI_MODEL=gemini-2.0-flash
GEMINI_EMBEDDING_MODEL=gemini-embedding-001
GEMINI_TIMEOUT_SEC=60
GEMINI_MAX_RETRIES=2
GEMINI_RETRY_BACKOFF_SEC=1.5
GEMINI_MAX_OUTPUT_TOKENS=700

AI_IMPORTANCE_ENABLED=1
# AI_IMPORTANCE_MAX_ITEMS=100
AI_IMPORTANCE_WEIGHT=1.0
AI_QUALITY_ENABLED=1
AI_SEMANTIC_DEDUPE_ENABLED=1
# AI_SEMANTIC_DEDUPE_MAX_ITEMS=50
AI_SEMANTIC_DEDUPE_THRESHOLD=0.88

AI_INPUT_MAX_CHARS=4000
AI_SUMMARY_MIN_CHARS=200
AI_EMBED_MAX_CHARS=1200

